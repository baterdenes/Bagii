<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <title>Zun Slots 2026 - Direct Info Map</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #map { height: calc(100vh - 80px); width: 100%; background: #e2e8f0; }
        
        /* Pop-up-ын загвар */
        .leaflet-popup-content-wrapper {
            border-radius: 16px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            min-width: 280px;
        }
        .leaflet-popup-content { margin: 0; width: auto !important; }
        
        .flight-header { padding: 12px 15px; color: white; font-weight: 900; font-style: italic; font-size: 1.2rem; }
        .flight-list { max-height: 250px; overflow-y: auto; padding: 10px; background: white; }
        .flight-item { 
            padding: 8px; border-bottom: 1px solid #f1f5f9; 
            display: flex; justify-content: space-between; align-items: center;
        }
        .flight-item:last-child { border: none; }
        
        /* Доод талын тайлбар */
        .legend {
            position: absolute; bottom: 20px; left: 20px; z-index: 1000;
            background: white; padding: 12px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-slate-900 font-sans">

    <!-- Header -->
    <header class="h-20 flex items-center px-8 justify-between bg-slate-900 border-b border-slate-800">
        <div>
            <h1 class="text-2xl font-black text-yellow-400 italic">2026 оны зуны нислэгийн хуваарь</h1>
            <p class="text-slate-400 text-xs font-bold tracking-widest uppercase">ИРГЭНИЙ НИСЭХИЙН ЕРӨНХИЙ ГАЗАР</p>
        </div>
        <div class="hidden md:block text-right">
            <span class="text-white text-xs font-bold opacity-50">Хот дээр дарж хуваарь харна уу</span>
        </div>
    </header>

    <!-- Map Section -->
    <div id="map"></div>

    <!-- Legend Overlay -->
    <div class="legend text-[10px] font-bold uppercase space-y-1">
        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#ec4899]"></span> Санья, Хайкоу (Амралт)</div>
        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#3b82f6]"></span> БНСУ (Сөүл, Бусан)</div>
        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#ef4444]"></span> Япон (Токио, Осака)</div>
        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#10b981]"></span> Европ (Стамбул, Франкфурт)</div>
        <div class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-[#6366f1]"></span> Хятад (Бээжин, Шанхай)</div>
    </div>

    <script>
        const ubn = [47.65, 106.76];
        
        // Comprehensive City Data
        const cityData = {
            "SANYA": {
                name: "Санья (Sanya)", color: "#ec4899", coords: [18.25, 109.51],
                flights: [
                    { air: "Juneyao", id: "DKH1528", t: "03:30-08:30", d: "Мягмар" },
                    { air: "Hunnu Air", id: "MML815", t: "22:10-03:10", d: "Пүрэв" }
                ]
            },
            "HAIKOU": {
                name: "Хайкоу (Haikou)", color: "#f472b6", coords: [20.01, 110.33],
                flights: [{ air: "Hunnu Air", id: "MML811", t: "22:10-03:10", d: "Мягмар" }]
            },
            "SEOUL": {
                name: "Сөүл (Seoul)", color: "#3b82f6", coords: [37.46, 126.44],
                flights: [
                    { air: "Korean Air", id: "KAL2042", t: "13:00-16:30", d: "Өдөр бүр" },
                    { air: "MIAT", id: "MGL301", t: "08:40-11:50", d: "Өдөр бүр" },
                    { air: "T'Way Air", id: "TWB422", t: "12:55-16:30", d: "Да, Лх, Ба, Ня" },
                    { air: "Asiana", id: "AAR568", t: "00:25-03:45", d: "Мя, Пү, Ба, Бя" }
                ]
            },
            "TOKYO": {
                name: "Токио (Tokyo)", color: "#ef4444", coords: [35.77, 140.39],
                flights: [
                    { air: "MIAT", id: "MGL501", t: "07:45-12:40", d: "Өдөр бүр" },
                    { air: "United", id: "UAL6", t: "09:55-14:45", d: "Да, Лх, Ба" },
                    { air: "Aero Mon", id: "MNG901", t: "08:00-12:30", d: "Мя, Ба" }
                ]
            },
            "ISTANBUL": {
                name: "Стамбул (Istanbul)", color: "#10b981", coords: [41.27, 28.75],
                flights: [{ air: "Turkish", id: "THY237", t: "09:10-18:45", d: "Мя, Пү, Ба, Ня" }]
            },
            "BEIJING": {
                name: "Бээжин (Beijing)", color: "#6366f1", coords: [40.07, 116.60],
                flights: [
                    { air: "Air China", id: "CCA724", t: "18:30-20:35", d: "Өдөр бүр" },
                    { air: "Hunnu Air", id: "MML801", t: "18:55-21:15", d: "Өдөр бүр" },
                    { air: "MIAT", id: "MGL223", t: "06:15-08:25", d: "Да, Лх, Ба" }
                ]
            },
            "FRANKFURT": {
                name: "Франкфурт (Frankfurt)", color: "#059669", coords: [50.03, 8.56],
                flights: [{ air: "MIAT", id: "MGL137", t: "10:10-18:50", d: "Да, Лх, Ба, Бя" }]
            }
        };

        const map = L.map('map', { zoomControl: false }).setView([38, 110], 4);
        L.control.zoom({ position: 'topright' }).addTo(map);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

        // Ulaanbaatar Center
        L.circleMarker(ubn, { radius: 10, color: 'white', fillColor: '#facc15', fillOpacity: 1, weight: 3 }).addTo(map).bindTooltip("УЛААНБААТАР", { permanent: true, direction: 'top' });

        // Build Markers and Lines
        Object.keys(cityData).forEach(key => {
            const city = cityData[key];
            
            // Connection Line
            L.polyline([ubn, city.coords], { color: city.color, weight: 2, opacity: 0.3, dashArray: '5, 10' }).addTo(map);
            
            // City Marker
            const marker = L.circleMarker(city.coords, {
                radius: 12, color: 'white', fillColor: city.color, fillOpacity: 0.8, weight: 2
            }).addTo(map);

            // Create Popup Content
            let flightHtml = `<div class="flight-header" style="background: ${city.color}">${city.name}</div>`;
            flightHtml += `<div class="flight-list">`;
            city.flights.forEach(f => {
                flightHtml += `
                    <div class="flight-item">
                        <div class="pr-4">
                            <div class="text-[10px] font-black text-slate-400 uppercase tracking-tighter">${f.air}</div>
                            <div class="text-xs font-bold text-slate-700">${f.d}</div>
                            <div class="text-[9px] text-blue-500 font-bold">${f.id}</div>
                        </div>
                        <div class="text-lg font-black text-slate-800">${f.t}</div>
                    </div>
                `;
            });
            flightHtml += `</div>`;

            // Bind Popup
            marker.bindPopup(flightHtml);

            // Interaction
            marker.on('mouseover', function (e) { this.openPopup(); });
            // Click keeps it open to let users scroll
        });
    </script>
</body>
</html>
